(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{280:function(t,a,e){"use strict";e.r(a);var r=e(14),s=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"接口概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接口概述"}},[t._v("#")]),t._v(" 接口概述")]),t._v(" "),a("p",[t._v("giscat-server的接口分为四类：")]),t._v(" "),a("p",[a("a",{attrs:{href:"/giscat-server/api/dataset"}},[t._v("数据集接口")]),t._v(" 用于在数据集上进行查询")]),t._v(" "),a("p",[a("a",{attrs:{href:"/giscat-server/api/layer"}},[t._v("图层接口")]),t._v(" 用于在图层上进行查询")]),t._v(" "),a("p",[a("a",{attrs:{href:"/giscat-server/api/map"}},[t._v("地图接口")]),t._v(" 用于在地图上进行查询，以及由此衍生出的矢量瓦片等地图服务")]),t._v(" "),a("p",[a("a",{attrs:{href:"/giscat-server/api/manage"}},[t._v("管理类接口")]),t._v(" 用于对系统进行管理操作，如删除缓存文件，重新加载配置信息等。由于giscat-server是不带有鉴权功能的，所以绝对不要把管理类接口从网关转发出去，否则会有极大的安全问题。")]),t._v(" "),a("h2",{attrs:{id:"接口查询逻辑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接口查询逻辑"}},[t._v("#")]),t._v(" 接口查询逻辑")]),t._v(" "),a("p",[t._v("我们简单了解一下gis的基本对象模型：")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/gis-model.jpg",alt:"gis对象基本模型示意"}})]),t._v(" "),a("p",[t._v("如图所示，以路况信息为例，\n每条路是一个要素（feature），包含了道路位置（geometry）和路名、拥挤程度等属性(property);\n所有道路构成道路图层(layer)；\n把道路以及建筑、水系等图层添加到地图(map)，配上相应的展现样式，就完成了一幅地图的制作。")]),t._v(" "),a("p",[t._v("而实际的系统建设中，feature的数量往往很大，我们需要一个数据库、文件之类的介质来存储和维护feature。\n介质中的存储结构成为数据集（data-set），例如数据库中的一张表就是一个数据集。")]),t._v(" "),a("p",[t._v("另外，在不同的地图"),a("a",{attrs:{href:"https://blog.csdn.net/weixin_30367873/article/details/98045260",target:"_blank",rel:"noopener noreferrer"}},[t._v("层级"),a("OutboundLink")],1),t._v("下，layer中的feature可能会不一致，\n比如一个道路图层，在层级7时只需显示道路的大致走向，我们从抽稀过坐标点的道路表查数据，而在层级14时需要展示精确的道路坐标信息，我们从道路原始表查数据，即可能会出现一个layer对应多个data-set的情况。\n所以实际系统建设时，我们需要一个规则(layer-data-rule)来表达在什么层级去什么数据源以什么过滤条件查feature。")]),t._v(" "),a("p",[t._v("因此，我们将查询类接口分为了数据集、图层、地图三类： 数据集接口负责直接向数据集查询数据；图层接口根据layer中层级、规则以对应的条件去查对应的数据集；地图接口把地图下所有的数据查询出来并聚合返回，矢量瓦片等接口也是一样的查询逻辑。")])])}),[],!1,null,null,null);a.default=s.exports}}]);